#summary Some pointers for common issues encountered while setting up Ampache
#labels Featured
<wiki:toc max_depth="3" />
= What do I put for a server URL? =
==Have you setup a server?====
===No===
Ampache Mobile is just an app that plays music from a server, an [http://ampache.org Ampache server].  You are responsible for setting up your own server.
 * [AmpacheServerSetup Server Setup]
===Yes===
See Below

= Ampache-mobile doesn't work =
   * If Ampache-mobile starts up and seems to run's OK on your Pre, but you are unable to connect to your music server, use the test below to help you figure out why Ampache-mobile isn't working.
        # Are you running the correct version of Ampache?  Ampache Mobile requires at least version 3.5.1 of Ampache to operate correctly.  [http://ampache.org/download.php Download]
        # Can you access Ampache using a web browser from the machine it is running on (i.e http://localhost )?  If no, then it looks like your Ampache music server is not working yet.
        # Can you access Ampache using a web browser from another machine on your network (i.e. http://192.168.x.x  or 10.x.x.x or 172.16.x.x )? If no, it could be a firewall issue on the machine running the Amapche music server or maybe an Ampache Server ACL rule. 
           * See this [http://www.ehow.com/how_2317017_turn-off-firewalls-computer.html page] on "how to turn off your firewall".
           * Check out this [http://ampache.org/wiki/config:acl page] on Ampache ACL rules  
        # Can you access Ampache using a web browser via Wi-Fi from your Pre(i.e. http://192.168.x.x)? If no, it could be a firewall issue on the machine running the Amapche music server or maybe an ACL rule. See links above.
        # Can you access Ampache using Ampache-mobile via Wifi from your Pre?
   * You may want to go through the steps above before posting a "Ampache-mobile isn't working" post and then posting which of the above steps worked for you and which didn't.
   

= Works on Wi-Fi but not EVDO =
  * Are you connecting to a private network address IP Address like 192.168.x.x  or 10.x.x.x or 172.16.x.x?  Most Wi-Fi routers have an internal IP pool and one External IP.  
    * A 192.168.x.x/10.x.x.x/172.16.x.x address is Internal and not accessible via EVDO
    * To find your external address try this link [http://www.whatismyip.com/]
  * Once you determine your internal address and external IP address you need to setup port forwarding on your router (or a "virtual port" on some routers).
    * Your goal is to forward your External IP address to your Internal Ampache Server address. Imagine that your router is a large building. 
        * The building has a unique public address that can be seen by everyone on the outside world (i.e. external IP address).
        * The building has 100's of outside doors (i.e. Ports).
        * Each outside door has a unique number (i.e. Port number). 
        * Almost all outside doors are always locked.
        * The building has one or more suites inside (i.e. private network address IP).
        * By default, the suites cannot be accessed from the outside: there are no hallways going from the outside doors to the suites.
        * All the suites are connected by an internal hallway (i.e. your private network) 
        * Each suite has 100's of offices with each office having an individual door (i.e ports).
        * The doors for each office are usually locked (by the firewall on your music server)
        * The Ampache server by default is occupying suite office 192.168.x.x, office 80. (where 192.168.x.x is the private IP address of the Ampache server, and port 80 by default is used for all HTML request)
        * When you set up a port forwarding rule, you are basically unlocking an outside door so everyone can come in whenever they like and building a hallway in the building that goes directly to one suite in the building. As an example: unlock door 80 and build a hallway that goes to suite 192.168.x.x, office 80 
        * Some ISPs block door 80: they install a lock on the outside of the door and you cannot unlock it...or you may have a router that is already running a web server on the public side of your router on port 80 (You see a web page for your router whenever you point a web browser at your public IP address) :
            * To get around this, you open up another door...as an example door 8080. At the same time you build a hallway in the building so anyone coming in on door 8080 is automatically directed to suite 192.168.x.x, office 80. 
            * To use the new door, add a ":port_number" to your URL. Example: http://music_server.dyndns.com:8080
            * Note: If you are using a secure server (i.e. https), you many need to also forward port 443 request.
    
    * [http://www.portforward.com/routers.htm This site] has a ton of port forwarding guides, most webservers default to running on port 80.  But you can choose any port you like as long as your configure your web server as such. 
  * Could be an ACL issue. Ampache uses Access Control Lists to restrict access to the music server (see http://ampache.org/wiki/config:acl). You will need to create a an ACL rule for EVDO access
     * Go to the Ampache Admin page
     * click on "Add ACL"
        * Name it (ex: EVDO Streaming) 
        * Level = all
        * User = all
        * ACL type = Stream Access
        * Remote Key =            (leave blank)
        * Start = 0.0.0.0 
        * End =  255.255.255.255
     * click on "Create ACL"


= Transcoding not working  =
  * Transcoding tools are not installed as part of Apache/XAMMP. You must download and install them separately. Here are some links to get you started :
     * LAME : http://en.wikipedia.org/wiki/LAME
     * FLAC : http://en.wikipedia.org/wiki/Flac
     * FACC : http://en.wikipedia.org/wiki/Advanced_Audio_Coding#FAAC_and_FAAD2
     * Mp3splt : http://en.wikipedia.org/wiki/Mp3splt
     * oggsplt/oggdec  : http://en.wikipedia.org/wiki/Ogg
     * ALAC : http://en.wikipedia.org/wiki/Alac
  * If things are not working, look at the Ampache log file on the music server for the command Ampache is running. Copy it and try to run it on the command line. [http://ampache.org/wiki/support#enabling_logging Enable Logging]
  * You set the default sample rate on the Ampache Admin page-> streaming. It is called "Transcode Bitrate".
  * The ";" is a comment character in the Aampache configuration file. Everything on the line after it is a comment and will not be executed. By default most transcoding commands are commented out -- they will not run.
  * Use the Amapche log file...it can REALLY help you to figure out why things are not working.
  * The Ampache page on Transcoding: http://ampache.org/wiki/config:transcode

=Getting a lot of Audio Stalls=
There are a couple of things you can do for webOS audio stalls.
  # Properly configure your Apache timeout work around in the account editor.
    * Basically webOS can only download a finite amount of music, lets say its 12MB.  Once it hits this limit it puts downloading the track on hold until it needs more data to play it.
    * There is an issue when downloading is put on hold within webOS. If it waits to long the server will close the connection and webOS fails to realize this, when it attempts to finish its download the audio service crashes. The timeout workaround in the account manager is for detecting this potential error and circumventing it.
    * The Apache setting for this is can be found in httpd.conf.  Setting [http://httpd.apache.org/docs/2.0/mod/core.html#timeout Description]
    * You can also extend the timeout for less crashes.
    * The value in httpd.conf and Ampache Mobile should match, if there is no value in httpd.conf then leave Ampache Mobile at 300.
  # Enabling transcoding/downsampling causes the Audio service to wait for downloading tracks far less often, thus avoiding the bug described above.  So it's a good thing to enable.
    * Most people use 96kpbs or 128kpbs depending on preference.

*Possible Fix*

    # Edit your httpd.conf file, if using Apache. Add the following line to the main body.  Making the TCP timeout 10 minutes.
      {{{
Timeout 600
      }}}
    # Restart Apache, setting won't take effect until a restart.
    # Set Apache Timeout Workaround in Ampache Mobile to 600

=Getting XML Errors Loading Lists=
==Empty fields in your music tags==
    * webOS has a few issues with processing xml which are exposed when you have empty fields in your tags.  [https://developer.palm.com/distribution/viewtopic.php?f=80&t=6719 See webOS bug report]
    * A simple solution is to use an id3 tag editor to fill those fields in and rescan your music catalog.
      * For Artists: Amapache Mobile uses Name only from the tag
      * For Albums: Its Artist, Album, Year and Genre (optional) 
==Corrupt data inside tags==
    * Sometimes music tags can get corrupt.  An easy way to spot this corruption is to browse your collection with Ampache.  If you notice any strange characters investigate the tag with a tag editor, I'd even just go ahead and rewrite them to the file.  Once complete rescan your catalog.